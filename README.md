# **🎮 Qalc (カルク) \- GIGAスクール向け計算バトルアプリ**

**Qalc (カルク)** は、GIGAスクール構想で導入されたタブレット端末（Chromebook, iPad, Windows PCなど）で手軽に遊べる、リアルタイム計算バトルWebアプリケーションです。

Google Apps Script (GAS) だけで動作するため、専用サーバーの契約は不要。Googleアカウントさえあれば、誰でも無料で導入・運用できます。

## **✨ 特徴 (Features)**

* **⚡ リアルタイム対戦 (Multiplayer)**  
  * 先生（児童・生徒も可、ホスト）がルームを作成し、児童・生徒が4桁のIDを入力して参加。  
  * QRコードでの簡単入室にも対応。  
  * リアルタイムでスコアと順位が変動し、教室が盛り上がります。  
* **🧘 ひとりモード (Single Player)**  
  * 自分のペースで練習できるモードも搭載。  
  * 制限時間やコースを自由に選べます。  
* **✍️ 手書きメモ機能 (Handwriting Memo)**  
  * 画面上に計算用紙として使える手書きエリアを搭載。  
  * タブレットやスマホのタッチ操作に対応。PCではクリック操作で描画可能。  
* **🤖 AI問題作成アシスタント (AI Import)**  
  * ChatGPTやGeminiなどの生成AIで作った問題データを、コピペだけで一括登録できる機能を搭載。  
  * 「3年生のあまりのある割り算を20問作って」とAIに頼むだけで、オリジナルのドリルが完成します。  
* **📱 PWA対応 & レスポンシブ**  
  * PC、タブレット、スマホ、どの端末でも最適なレイアウトで表示。  
  * ホーム画面に追加することで、ネイティブアプリのような感覚で使えます。  
* **📚 豊富な初期データ**  
  * 小学1年生の「あわせて10」から、6年生の「分数」「速さ」「文字と式」まで、主要な単元をプリセット済み。  
  * **分数の縦書き表示**や、\*\*複数正解（約分前・後どちらも正解など）\*\*にも対応した高度な判定ロジックを搭載。

## **🚀 導入方法 (Setup)**

このアプリは **Google Apps Script (GAS)** として動作します。

### **1\. プロジェクトの作成**

1. [Google Apps Script](https://script.google.com/) にアクセスし、「新しいプロジェクト」を作成します。  
2. プロジェクト名を Qalc などに変更します。

### **2\. ファイルの作成**

以下の5つのファイルを作成し、それぞれのコードをコピー＆ペーストしてください。

(拡張子が .gs のものはスクリプト、.html のものはHTMLファイルとして作成します)

| ファイル名 | 種類 | 説明 |
| :---- | :---- | :---- |
| code.gs | スクリプト | サーバーサイドのロジック、DB操作 |
| initialData.gs | スクリプト | 初回起動時に登録される問題データ集 |
| index.html | HTML | アプリの画面構成 (HTML) |
| css.html | HTML | デザイン・スタイル (CSS) |
| js.html | HTML | フロントエンドの動作・ゲームロジック (JavaScript) |

### **3\. デプロイ (公開)**

1. 画面右上の **「デプロイ」** \> **「新しいデプロイ」** をクリック。  
2. 「種類の選択」で **「ウェブアプリ」** を選択。  
3. 以下の設定を入力：  
   * **次のユーザーとして実行**: 自分  
   * **アクセスできるユーザー**: 全員 (または Googleアカウントを持つ全員)  
4. 「デプロイ」ボタンをクリック。  
5. **「ウェブアプリのURL」** が発行されます。これがアプリのURLです。

⚠️ **初回アクセス時の注意**

最初にアプリを開くと「承認」を求められる場合があります。Googleの仕様ですので、「権限を確認」→「詳細」→「Qalc(安全ではないページ)に移動」と進んで許可してください。

初回起動時に、Googleドライブ内に自動的にデータベース用のスプレッドシート (Qalc\_DB) が生成されます。

## **📖 使い方 (Usage)**

### **🏫 先生（ホスト）の操作**

1. **「ルームをつくる」** を選択。  
2. 名前、制限時間、プレイするコース（問題集）を選択。  
3. 「ルームをつくる！」を押すとロビー画面へ。  
4. 表示された **4桁の数字（ルームID）** または **QRコード** を児童・生徒に共有。  
5. 全員が集まったら **「START\!」** ボタンでゲーム開始！

### **🎒 児童・生徒（ゲスト）の操作**

1. **「参加する」** を選択。  
2. 好きなアバターを選び、教えてもらった **4桁のルームID** と **名前** を入力。  
3. 「入室する！」を押して、先生がスタートするのを待つ。

### **✏️ 問題の追加・編集**

1. トップ画面下の **「問題の管理 (コース編集)」** をクリック。  
2. **「新規作成」** で新しいコースを作るか、既存のコースを選択して編集。  
3. **「AIインポート」** を使うと、生成AI用のプロンプトをコピーできます。AIに作らせたCSVデータを貼り付けるだけで問題を一括追加できます。

## **🛠️ 技術仕様 & カスタマイズ**

* **Backend**: Google Apps Script  
* **Database**: Google Spreadsheet (自動生成)  
* **Frontend**: HTML5, CSS3 (Bootstrap 5), Vanilla JavaScript  
* **Libraries**:  
  * qrcode.js: QRコード生成  
  * canvas-confetti: 紙吹雪エフェクト  
  * SweetAlert2: ポップアップ表示

### **コードの保守について**

* **initialData.gs**: 初期問題データが格納されています。ここを編集してデプロイし直すことで、初期状態の問題セットを変更できます。  
* **スプレッドシート**: 生成された Qalc\_DB スプレッドシートを直接編集することでも、問題や履歴の管理が可能です。

## **📜 ライセンス**

This project is licensed under the MIT License \- see the [LICENSE](https://www.google.com/search?q=LICENSE) file for details.

教育現場での利用、改変、再配布は自由です。

© 2026 Qalc Project
